<?xml version="1.0" encoding="iso-8859-1"?>
<ui:composition xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:b="http://mogwai.sourceforge.net/layout"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:rich="http://richfaces.org/rich" template="/template/powerstaff.xhtml">
<ui:define name="mainmenu">
    <ui:include src="/include/mainmenu.xhtml"/>
</ui:define>
<ui:define name="contextmenu">
    <ui:include src="/include/freelancer/freelancermenu1.xhtml"/>
</ui:define>
<ui:define name="content">
<b:title title="Freiberufler - Stammdaten"/>
<f:subview id="freelancer_core">
<b:gridBagLayout id="x" rows="p,10" cols="500,p">
    <b:cell y="1" x="1">
        <h:panelGroup>
            <h:outputText styleClass="title" value="Freiberufler"/>
            <ui:include src="/include/context.xhtml"/>
        </h:panelGroup>
    </b:cell>

    <b:cell y="1" x="2">
        <a4j:status>
            <f:facet name="start">
                <b:image source="images/rotate2.gif" width="20" height="20"/>
            </f:facet>
        </a4j:status>
    </b:cell>
</b:gridBagLayout>

<b:gridBagLayout cols="400,10,400" rows="30,10,1,p" id="menu">
<b:cell x="1" y="1" width="3">
    <b:titledBox label="Menu">
        <b:gridBagLayout cols="20,20,20,20,20,20,20,20,20,20,20,80,50,20,right:*"
                         rows="20,2,20">
            <b:cell x="1" y="1">
                <b:commandLink title="Erster Datensatz" action="#{freelancerBackingBean.commandFirst}">
                    <b:image source="/images/first.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="2" y="1">
                <b:commandLink title="Vorheriger Datensatz" action="#{freelancerBackingBean.commandPrior}">
                    <b:image source="/images/prior.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;};"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="3" y="1">
                <b:commandLink title="Nächster Datensatz" action="#{freelancerBackingBean.commandNext}">
                    <b:image source="/images/next.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="4" y="1">
                <b:commandLink title="Letzter Datensatz" action="#{freelancerBackingBean.commandLast}">
                    <b:image source="/images/last.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="6" y="1">
                <b:commandLink title="Neuer Datensatz" action="#{freelancerBackingBean.commandNew}">
                    <b:image source="/images/new.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="7" y="1">
                <b:commandLink title="Speichern" action="#{freelancerBackingBean.commandSave}">
                    <b:image source="/images/update.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="9" y="1">
                <a4j:commandLink title="Löschen" action="#{freelancerBackingBean.commandDelete}"
                                 onclick="if (!confirm('Wollen Sie diesen Datensatz wirklick löschen?')) {return false;}"
                                 reRender="#{freelancerBackingBean.data.changedComponents}" oncomplete="clearChanged()">
                    <b:image source="/images/delete.gif"/>
                </a4j:commandLink>
            </b:cell>
            <b:cell x="11" y="1">
                <b:commandLink title="Suchen" action="#{freelancerBackingBean.commandSearch}">
                    <b:image source="/images/search.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="12" y="1" valign="middle" align="right">
                <b:label id="gehezu" label="Gehe zu #"/>
            </b:cell>
            <b:cell x="13" y="1">
                <b:numberinputfield id="recordnumber" labelComponentId="gehezu"
                                    value="#{freelancerBackingBean.data.recordNumber}"/>
            </b:cell>
            <b:cell x="14" y="1">
                <b:commandLink title="Springe zu Datensatz" action="#{freelancerBackingBean.commandJumpToRecord}">
                    <b:image source="/images/search.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="if (!checkForChangedData()) {return false;}"
                                 oncomplete="clearChanged()"/>
                </b:commandLink>
            </b:cell>
            <b:cell x="15" y="1" align="right">
                <a4j:outputPanel ajaxRendered="true">
                    <h:outputText value="#{freelancerBackingBean.recordInfo}"/>
                </a4j:outputPanel>
            </b:cell>

            <b:cell x="12" y="3" align="right" width="4">
                <a4j:outputPanel ajaxRendered="true">
                    <h:outputText value="#{freelancerBackingBean.data.entity}">
                        <f:converter converterId="auditInformationConverter"/>
                    </h:outputText>
                </a4j:outputPanel>
            </b:cell>

        </b:gridBagLayout>
    </b:titledBox>
</b:cell>

<b:cell x="1" y="3" width="3">
    <ui:include src="/include/messages.xhtml"/>
</b:cell>

<b:cell x="1" y="4">
<b:gridBagLayout rows="p,10,p,10,p,10,p,10,p" cols="*" id="adresse">
<b:cell x="1" y="1">
    <b:titledBox label="Adresse">

        <b:gridBagLayout cols="2,100,2,30,2,50,2,*,2"
                         rows="2,p,2,p,2,p,2,p,2,p,2,p,2,p,2,p,2">

            <b:cell x="2" y="2">
                <b:label id="titellabel" label="Titel"/>
            </b:cell>
            <b:cell x="4" y="2" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.titel}"
                        id="titel" labelComponentId="titellabel"/>
            </b:cell>

            <b:cell x="2" y="4">
                <b:label id="vornamelabel" label="Name"/>
            </b:cell>
            <b:cell x="4" y="4" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.name1}"
                        id="vorname" labelComponentId="vornamelabel"/>
            </b:cell>

            <b:cell x="2" y="6">
                <b:label id="nachname_label" label="Vorname"/>
            </b:cell>
            <b:cell x="4" y="6" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.name2}"
                        id="nachname" labelComponentId="nachname_label"/>
            </b:cell>

            <b:cell x="2" y="8">
                <b:label id="firma_label" label="Firma"/>
            </b:cell>
            <b:cell x="4" y="8" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.company}"
                        id="firma" labelComponentId="firma_label"/>
            </b:cell>

            <b:cell x="2" y="10">
                <b:label id="strasse_label" label="Strasse"/>
            </b:cell>
            <b:cell x="4" y="10" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.street}"
                        id="strasse" labelComponentId="strasse_label"/>
            </b:cell>

            <b:cell x="2" y="12">
                <b:label id="plzort_label" label="Land Plz/Ort"/>
            </b:cell>

            <b:cell x="4" y="12">
                <b:inputfield value="#{freelancerBackingBean.data.entity.country}"
                              id="land" labelComponentId="plzort_label"/>
            </b:cell>

            <b:cell x="6" y="12">
                <b:inputfield value="#{freelancerBackingBean.data.entity.plz}"
                              id="plz" labelComponentId="plzort_label"/>
            </b:cell>

            <b:cell x="8" y="12">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.city}" id="ort"
                        labelComponentId="plz_ort_label"/>
            </b:cell>

            <b:cell x="2" y="14">
                <b:label id="nationallabel" label="Nationalität"/>
            </b:cell>
            <b:cell x="4" y="14" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.nationalitaet}"
                        id="nationalitaet" labelComponentId="nationallabel"/>
            </b:cell>

            <b:cell x="2" y="16">
                <b:label id="geburtstaglabel" label="Geburtsdatum"/>
            </b:cell>
            <b:cell x="4" y="16" width="5">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.geburtsdatum}"
                        id="geburtstag" labelComponentId="geburtstaglabel"/>
            </b:cell>

        </b:gridBagLayout>


    </b:titledBox>
</b:cell>
<b:cell x="1" y="3">
    <b:titledBox label="Kontaktinformationen" id="contact">

        <b:gridBagLayout cols="2,200,2,*,2,20,2"
                         rows="2,p,2,p,2,10,10,p,2">

            <b:cell x="2" y="2" width="3">
                <b:checkbox
                        value="#{freelancerBackingBean.data.entity.contactforbidden}"
                        id="kontaktsperre" label="Kontaktsperre"/>
            </b:cell>

            <b:cell x="2" y="4" width="5">
                <b:table id="kontakttable" cols="80,*,20" var="row" value="#{freelancerBackingBean.data.contacts}"
                         showHeader="false" useStyles="false">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Art"/>
                        </f:facet>
                        <h:outputText value="#{row.type.description}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Wert"/>
                        </f:facet>
                        <h:outputText value="#{row}" escape="false">
                            <f:converter converterId="contactConverter"/>
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <b:commandLink title="Kontaktinformation löschen"
                                       action="#{freelancerBackingBean.commandDeleteContact}">
                            <b:image source="/images/delete.gif"/>
                            <a4j:support eventsQueue="powerstaff" event="onclick"
                                         reRender="kontakttable"
                                         onsubmit="markChanged()"/>
                        </b:commandLink>
                    </h:column>
                </b:table>
            </b:cell>

            <b:cell x="2" y="8">
                <b:combobox
                        value="#{freelancerBackingBean.data.newContactType}"
                        values="#{freelancerBackingBean.data.contactTypes}"
                        nullable="false"
                        id="kontakttyp"/>
            </b:cell>
            <b:cell x="4" y="8">
                <b:inputfield
                        value="#{freelancerBackingBean.data.newContactValue}"
                        id="kontaktwert"/>
            </b:cell>
            <b:cell x="6" y="8" valign="middle">
                <b:commandLink title="Kontaktinformation hinzufügen"
                               action="#{freelancerBackingBean.commandAddContact}">
                    <b:image source="images/add.gif"/>
                    <a4j:support eventsQueue="powerstaff" event="onclick"
                                 reRender="#{freelancerBackingBean.data.changedComponents}"
                                 onsubmit="markChanged()"/>
                </b:commandLink>
            </b:cell>

        </b:gridBagLayout>


    </b:titledBox>
</b:cell>
<b:cell x="1" y="5">
    <b:titledBox label="Kommentar">
        <b:gridBagLayout cols="2,*,2" rows="2,100,2">
            <b:cell x="2" y="2">
                <b:textarea
                        value="#{freelancerBackingBean.data.entity.comments}"
                        id="kommentar"/>
            </b:cell>
        </b:gridBagLayout>
    </b:titledBox>
</b:cell>

<b:cell x="1" y="7">
    <b:titledBox label="Zusatzinformationen">

        <b:gridBagLayout cols="2,100,2,*,2" rows="2,p,2,p,2,p,2,p,2,p,2">

            <b:cell x="2" y="2">
                <b:label id="kontaktperson_label" label="Kontaktperson"/>
            </b:cell>
            <b:cell x="4" y="2">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.contactPerson}"
                        id="kontaktperson" labelComponentId="kontaktperson_label"/>
            </b:cell>

            <b:cell x="2" y="4">
                <b:label id="kontaktart_label" label="Kontaktart"/>
            </b:cell>
            <b:cell x="4" y="4">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.contactType}"
                        id="kontaktart" labelComponentId="kontaktart_label"/>
            </b:cell>

            <b:cell x="2" y="6">
                <b:label id="kontaktgrund_label" label="Kontaktgrund"/>
            </b:cell>
            <b:cell x="4" y="6">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.contactReason}"
                        id="kontaktgrund" labelComponentId="kontaktgrund_label"/>
            </b:cell>

            <b:cell x="2" y="8">
                <b:label id="letzter_kontakt_label" label="Letzter Kontakt"/>
            </b:cell>
            <b:cell x="4" y="8">
                <b:inputfield
                        value="#{freelancerBackingBean.data.entity.lastContact}"
                        id="letzter_kontakt" labelComponentId="letzter_kontakt_label"/>
            </b:cell>

            <b:cell x="4" y="10">
                <b:checkbox
                        value="#{freelancerBackingBean.data.entity.showAgain}"
                        id="wiedervorlage" label="Wiedervorlage"/>
            </b:cell>

        </b:gridBagLayout>

    </b:titledBox>
</b:cell>

<b:cell x="1" y="9">
    <b:titledBox label="Projektinformation" rendered="#{contextUtils.contextSet}">

        <b:gridBagLayout cols="2,100,2,*,2" rows="2,p,2,p,2,50,2">

            <b:cell x="2" y="2">
                <b:label id="project_status" label="Status"/>
            </b:cell>
            <b:cell x="4" y="2">
                <b:combobox
                        value="#{freelancerBackingBean.data.currentProjectPosition.status}"
                        values="#{freelancerBackingBean.positionStatus}"
                        nullable="true"
                        id="positionstatus"/>
            </b:cell>

            <b:cell x="2" y="4">
                <b:label id="project_kontitionen" label="Konditionen"/>
            </b:cell>
            <b:cell x="4" y="4">
                <b:inputfield
                        value="#{freelancerBackingBean.data.currentProjectPosition.conditions}"
                        id="project_konditionen_input" labelComponentId="project_kontitionen"/>
            </b:cell>

            <b:cell x="2" y="6">
                <b:label id="project_comments" label="Kommentar"/>
            </b:cell>
            <b:cell x="4" y="6">
                <b:textarea
                        value="#{freelancerBackingBean.data.currentProjectPosition.comment}"
                        id="project_comment_input" labelComponentId="project_comments"/>
            </b:cell>

        </b:gridBagLayout>

    </b:titledBox>
</b:cell>

</b:gridBagLayout>
</b:cell>

<b:cell x="3" y="4">
    <b:gridBagLayout rows="p,10,p,10,p,10,p" cols="*">
        <b:cell x="1" y="1">
            <b:titledBox label="Verfügbarkeit">

                <b:gridBagLayout cols="2,100,2,*,2,20,2"
                                 rows="2,p,2,p,2,p,2,p,2,p,2,p,2,p,2,p,2">

                    <b:cell x="2" y="2">
                        <b:label id="einsatzort_label" label="Einsatzort"/>
                    </b:cell>
                    <b:cell x="4" y="2" width="3">
                        <b:inputfield
                                value="#{freelancerBackingBean.data.entity.workplace}"
                                id="einsatzort" labelComponentId="einsatzort_label"/>
                    </b:cell>

                    <b:cell x="2" y="4">
                        <b:label id="verfuegbarkeit_label" label="Verfügbarkeit"/>
                    </b:cell>
                    <b:cell x="4" y="4" width="3">
                        <rich:calendar value="#{freelancerBackingBean.data.entity.availabilityAsDate}"
                                       datePattern="dd.MM.yyyy"
                                       inputStyle="width:270px;"
                                       cellWidth="34px"
                                       onchanged="markChanged()"
                                       eventsQueue="powerstaff">
                        </rich:calendar>
                    </b:cell>

                    <b:cell x="2" y="6">
                        <b:label id="stundensatz_label" label="Stundensatz"/>
                    </b:cell>
                    <b:cell x="4" y="6" width="3">
                        <b:numberinputfield
                                value="#{freelancerBackingBean.data.entity.sallaryLong}"
                                id="stundensatz" labelComponentId="stundensatz_label"/>
                    </b:cell>

                    <b:cell x="2" y="8">
                        <b:label id="tagessatz_label" label="Tagessatz"/>
                    </b:cell>
                    <b:cell x="4" y="8" width="3">
                        <b:numberinputfield
                                value="#{freelancerBackingBean.data.entity.sallaryPerDayLong}"
                                id="tagessatz" labelComponentId="tagessatz_label"/>
                    </b:cell>

                    <b:cell x="2" y="10">
                        <b:label id="partner_label" label="Ges.P."/>
                    </b:cell>
                    <b:cell x="4" y="10">
                        <a4j:outputPanel ajaxRendered="true">
                            <h:outputText value="#{freelancerBackingBean.data.entity.partner}">
                                <f:converter converterId="personConverter"/>
                            </h:outputText>
                        </a4j:outputPanel>
                    </b:cell>
                    <b:cell x="6" y="10">
                        <b:commandLink title="Springe zur Partner - Ansicht"
                                       action="#{freelancerBackingBean.commandShowPartner}">
                            <b:image source="/images/next.gif"/>
                            <a4j:support eventsQueue="powerstaff" event="onclick"
                                         reRender="#{freelancerBackingBean.data.changedComponents}"/>
                        </b:commandLink>
                    </b:cell>


                    <b:cell x="2" y="12">
                        <b:label id="stdsatz_p_label" label="Stds. Partner"/>
                    </b:cell>
                    <b:cell x="4" y="12" width="3">
                        <b:numberinputfield
                                value="#{freelancerBackingBean.data.entity.sallaryPartnerLong}"
                                id="stdsatz_p" labelComponentId="stdsatz_p_label"/>
                    </b:cell>

                    <b:cell x="2" y="14">
                        <b:label id="tgssatz_p_label" label="Tgs. Partner"/>
                    </b:cell>
                    <b:cell x="4" y="14" width="3">
                        <b:numberinputfield
                                value="#{freelancerBackingBean.data.entity.sallaryPartnerPerDayLong}"
                                id="tgssatz_p" labelComponentId="tgssatz_p_label"/>
                    </b:cell>

                    <b:cell x="2" y="16">
                        <b:label id="typ_label" label="Typ"/>
                    </b:cell>
                    <b:cell x="4" y="16" width="3">
                        <b:combobox
                                value="#{freelancerBackingBean.data.entity.status}" id="typ"
                                values="#{freelancerBackingBean.data.status}"
                                labelComponentId="typ_label"
                                />
                    </b:cell>

                </b:gridBagLayout>
            </b:titledBox>
        </b:cell>
        <b:cell x="1" y="3">
            <b:titledBox label="Kodierung">

                <b:gridBagLayout cols="2,100,2,*,2" rows="2,p,2,p,2,p,2,p,2,110,2">

                    <b:cell x="2" y="2">
                        <b:label id="kodierung_label" label="Kodierung"/>
                    </b:cell>
                    <b:cell x="4" y="2">
                        <b:inputfield
                                value="#{freelancerBackingBean.data.entity.code}"
                                id="kodierung" labelComponentId="kodierung_label"/>

                        <rich:suggestionbox eventsQueue="powerstaff" id="codesuggestion" for="kodierung_value"
                                            frequency="0.2" requestDelay="200" ignoreDupResponses="true" width="290"
                                            height="100" var="row"
                                            suggestionAction="#{freelancerBackingBean.getCodeSuggestion}"
                                            shadowOpacity="9">
                            <h:column>
                                <h:outputText value="#{row}"/>
                            </h:column>
                        </rich:suggestionbox>
                    </b:cell>

                    <b:cell x="2" y="4">
                        <b:label id="debitor_label" label="Debitor"/>
                    </b:cell>
                    <b:cell x="4" y="4">
                        <b:inputfield
                                value="#{freelancerBackingBean.data.entity.debitorNr}"
                                id="debitor" labelComponentId="debitor_label"/>
                    </b:cell>

                    <b:cell x="2" y="6">
                        <b:label id="kreditor_label" label="Kreditor"/>
                    </b:cell>
                    <b:cell x="4" y="6">
                        <b:inputfield
                                value="#{freelancerBackingBean.data.entity.kreditorNr}"
                                id="kreditor" labelComponentId="kreditor_label"/>
                    </b:cell>

                    <b:cell x="2" y="8">
                        <b:label id="gulpid_label" label="Gulp ID"/>
                    </b:cell>
                    <b:cell x="4" y="8">
                        <b:inputfield
                                value="#{freelancerBackingBean.data.entity.gulpID}"
                                id="gulpid" labelComponentId="gulpid_label"/>
                    </b:cell>

                    <b:cell x="2" y="10">
                        <b:label id="skills_label" label="Skills"/>
                    </b:cell>
                    <b:cell x="4" y="10">
                        <b:textarea
                                value="#{freelancerBackingBean.data.entity.skills}"
                                id="skills" labelComponentId="skills_label"/>
                    </b:cell>

                </b:gridBagLayout>

            </b:titledBox>
        </b:cell>
        <b:cell x="1" y="5">
            <b:titledBox label="Profile">
                <b:table cols="400" var="row" value="#{freelancerBackingBean.data.profiles}" useStyles="false"
                         showHeader="false">
                    <h:column>
                        <b:gridBagLayout cols="220,160,220" rows="20,p,p">
                            <b:cell x="2" y="2" align="center">
                                <h:commandLink title="#{row.infotext}"
                                               onclick="#{freelancerBackingBean.profileOpenCommand}">
                                    <b:image source="/images/word.gif" rendered="#{row.wordProfile}"/>
                                    <b:image source="/images/textfile.png" rendered="#{row.textProfile}"/>
                                    <b:image source="/images/word.gif" rendered="#{row.otherFormat}"/>
                                </h:commandLink>
                            </b:cell>
                            <b:cell x="2" y="3" align="center">
                                <h:outputText value="#{row.name}"/>
                            </b:cell>
                        </b:gridBagLayout>
                    </h:column>
                </b:table>
            </b:titledBox>
        </b:cell>

    </b:gridBagLayout>
</b:cell>

</b:gridBagLayout>

</f:subview>

<a4j:outputPanel ajaxRendered="true">
    <rich:jQuery selector=":input:not(:hidden)" query="change(function() {markChanged();})"/>
</a4j:outputPanel>

</ui:define>
</ui:composition>	